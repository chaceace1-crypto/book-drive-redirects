<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Loading…</title>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SKHZVP410R"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }

    gtag('js', new Date());
    gtag('set', 'debug_mode', true);   // safe to remove later
    gtag('config', 'G-SKHZVP410R');

    const AMAZON_URL =
      "https://www.amazon.com/registries/gl/guest-view/ZDTUNIPEUK0?ref_=cm_sw_r_cp_ud_ggr-subnav-share_023JZ5HMZA5EQF5X58K7";

    // Capture UTM parameters
    const params = new URLSearchParams(window.location.search);
    const utmParams = new URLSearchParams();

    ["utm_source", "utm_medium", "utm_campaign", "utm_content", "utm_term"]
      .forEach(key => {
        if (params.has(key)) {
          utmParams.set(key, params.get(key));
        }
      });

    const redirectUrl = utmParams.toString()
      ? AMAZON_URL + "&" + utmParams.toString()
      : AMAZON_URL;

    // Fire an explicit page_view with full URL
    gtag('event', 'page_view', {
      page_location: window.location.href,
      page_referrer: document.referrer
    });

    // Redirect after 1000ms
    setTimeout(() => {
      window.location.replace(redirectUrl);
    }, 1000);
  </script>
</head>

<body>
  <p>Loading Amazon…</p>
</body>
</html>
